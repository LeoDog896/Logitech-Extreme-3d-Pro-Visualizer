import{S as Ut,i as Dt,s as St,e as y,t as _,k as E,c as B,a as T,h as b,d as o,m as h,b as Y,K as L,g as a,J as r,n as W,l as Nt,p as Lt,q as It,r as Ot,o as Mt,L as Vt,x as Yt,y as qt,z as jt,j as D,C as Gt}from"../chunks/index-483e7132.js";function Wt(i){let e,s,u,d,n,v,k,f,g,w,p,O,R,P,X,M,$,q,N,C,V;return{c(){e=y("div"),s=y("button"),u=_("Top Left"),d=E(),n=y("button"),v=_("Top Middle"),k=E(),f=y("button"),g=_("Top Right"),w=E(),p=y("br"),O=E(),R=y("div"),P=y("button"),X=_("Bottom Left"),M=E(),$=y("button"),q=_("Bottom Middle"),N=E(),C=y("button"),V=_("Bottom Right"),this.h()},l(m){e=B(m,"DIV",{class:!0});var c=T(e);s=B(c,"BUTTON",{class:!0});var S=T(s);u=b(S,"Top Left"),S.forEach(o),d=h(c),n=B(c,"BUTTON",{class:!0});var H=T(n);v=b(H,"Top Middle"),H.forEach(o),k=h(c),f=B(c,"BUTTON",{class:!0});var j=T(f);g=b(j,"Top Right"),j.forEach(o),c.forEach(o),w=h(m),p=B(m,"BR",{}),O=h(m),R=B(m,"DIV",{class:!0});var U=T(R);P=B(U,"BUTTON",{class:!0});var z=T(P);X=b(z,"Bottom Left"),z.forEach(o),M=h(U),$=B(U,"BUTTON",{class:!0});var I=T($);q=b(I,"Bottom Middle"),I.forEach(o),N=h(U),C=B(U,"BUTTON",{class:!0});var Q=T(C);V=b(Q,"Bottom Right"),Q.forEach(o),U.forEach(o),this.h()},h(){Y(s,"class","flex-grow m-4 bg-gray-200 px-4 py-2 rounded-md"),L(s,"bg-gray-300",i[0].buttons.side_panel.left_top),Y(n,"class","flex-grow m-4 bg-gray-200 px-4 py-2 rounded-md"),L(n,"bg-gray-300",i[0].buttons.side_panel.middle_top),Y(f,"class","flex-grow m-4 bg-gray-200 px-4 py-2 rounded-md"),L(f,"bg-gray-300",i[0].buttons.side_panel.right_top),Y(e,"class","flex flex-row w-1/2"),Y(P,"class","flex-grow m-4 bg-gray-200 px-4 py-2 rounded-md"),L(P,"bg-gray-300",i[0].buttons.side_panel.left_bottom),Y($,"class","flex-grow m-4 bg-gray-200 px-4 py-2 rounded-md"),L($,"bg-gray-300",i[0].buttons.side_panel.middle_bottom),Y(C,"class","flex-grow m-4 bg-gray-200 px-4 py-2 rounded-md"),L(C,"bg-gray-300",i[0].buttons.side_panel.right_bottom),Y(R,"class","flex flex-row w-1/2")},m(m,c){a(m,e,c),r(e,s),r(s,u),r(e,d),r(e,n),r(n,v),r(e,k),r(e,f),r(f,g),a(m,w,c),a(m,p,c),a(m,O,c),a(m,R,c),r(R,P),r(P,X),r(R,M),r(R,$),r($,q),r(R,N),r(R,C),r(C,V)},p(m,[c]){c&1&&L(s,"bg-gray-300",m[0].buttons.side_panel.left_top),c&1&&L(n,"bg-gray-300",m[0].buttons.side_panel.middle_top),c&1&&L(f,"bg-gray-300",m[0].buttons.side_panel.right_top),c&1&&L(P,"bg-gray-300",m[0].buttons.side_panel.left_bottom),c&1&&L($,"bg-gray-300",m[0].buttons.side_panel.middle_bottom),c&1&&L(C,"bg-gray-300",m[0].buttons.side_panel.right_bottom)},i:W,o:W,d(m){m&&o(e),m&&o(w),m&&o(p),m&&o(O),m&&o(R)}}}function Xt(i,e,s){let{data:u}=e;return i.$$set=d=>{"data"in d&&s(0,u=d.data)},[u]}class zt extends Ut{constructor(e){super(),Dt(this,e,Xt,Wt,St,{data:0})}}function At(i){let e,s,u,d;return{c(){e=y("button"),s=_("Open"),this.h()},l(n){e=B(n,"BUTTON",{class:!0});var v=T(e);s=b(v,"Open"),v.forEach(o),this.h()},h(){Y(e,"class","fixed top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%] px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300 active:bg-gray-400 transition-all")},m(n,v){a(n,e,v),r(e,s),u||(d=Vt(e,"click",i[2]),u=!0)},p:W,i:W,o:W,d(n){n&&o(e),u=!1,d()}}}function Jt(i){let e,s;return{c(){e=y("p"),s=_("Waiting for input...")},l(u){e=B(u,"P",{});var d=T(e);s=b(d,"Waiting for input..."),d.forEach(o)},m(u,d){a(u,e,d),r(e,s)},p:W,i:W,o:W,d(u){u&&o(e)}}}function Kt(i){let e,s,u=i[1].position.x+"",d,n,v=i[1].position.y+"",k,f,g,w,p=i[1].yaw+"",O,R,P,X,M=i[1].view+"",$,q,N,C,V=i[1].throttle+"",m,c,S,H,j=i[1].buttons.trigger+"",U,z,I,Q,tt=i[1].buttons.side_grip+"",st,it,nt,ft,A,yt,et=i[1].buttons.controller_buttons.top_left+"",ut,pt,J,Bt,ot=i[1].buttons.controller_buttons.top_right+"",at,_t,K,Tt,lt=i[1].buttons.controller_buttons.bottom_left+"",bt,mt,F,wt,rt=i[1].buttons.controller_buttons.bottom_right+"",dt,vt,gt,ct,G,x;return G=new zt({props:{data:i[1]}}),{c(){e=y("p"),s=_("X: "),d=_(u),n=_(" | Y: "),k=_(v),f=E(),g=y("p"),w=_("Yaw: "),O=_(p),R=E(),P=y("p"),X=_("View: "),$=_(M),q=E(),N=y("p"),C=_("Throttle: "),m=_(V),c=E(),S=y("p"),H=_("Trigger: "),U=_(j),z=E(),I=y("p"),Q=_("Side Grip: "),st=_(tt),it=E(),nt=y("br"),ft=E(),A=y("p"),yt=_("Top Left Controller Button: "),ut=_(et),pt=E(),J=y("p"),Bt=_("Top Right Controller Button: "),at=_(ot),_t=E(),K=y("p"),Tt=_("Bottom Left Controller Button: "),bt=_(lt),mt=E(),F=y("p"),wt=_("Bottom Right Controller Button: "),dt=_(rt),vt=E(),gt=y("br"),ct=E(),Yt(G.$$.fragment)},l(t){e=B(t,"P",{});var l=T(e);s=b(l,"X: "),d=b(l,u),n=b(l," | Y: "),k=b(l,v),l.forEach(o),f=h(t),g=B(t,"P",{});var Z=T(g);w=b(Z,"Yaw: "),O=b(Z,p),Z.forEach(o),R=h(t),P=B(t,"P",{});var Et=T(P);X=b(Et,"View: "),$=b(Et,M),Et.forEach(o),q=h(t),N=B(t,"P",{});var ht=T(N);C=b(ht,"Throttle: "),m=b(ht,V),ht.forEach(o),c=h(t),S=B(t,"P",{});var kt=T(S);H=b(kt,"Trigger: "),U=b(kt,j),kt.forEach(o),z=h(t),I=B(t,"P",{});var Rt=T(I);Q=b(Rt,"Side Grip: "),st=b(Rt,tt),Rt.forEach(o),it=h(t),nt=B(t,"BR",{}),ft=h(t),A=B(t,"P",{});var Pt=T(A);yt=b(Pt,"Top Left Controller Button: "),ut=b(Pt,et),Pt.forEach(o),pt=h(t),J=B(t,"P",{});var xt=T(J);Bt=b(xt,"Top Right Controller Button: "),at=b(xt,ot),xt.forEach(o),_t=h(t),K=B(t,"P",{});var $t=T(K);Tt=b($t,"Bottom Left Controller Button: "),bt=b($t,lt),$t.forEach(o),mt=h(t),F=B(t,"P",{});var Ct=T(F);wt=b(Ct,"Bottom Right Controller Button: "),dt=b(Ct,rt),Ct.forEach(o),vt=h(t),gt=B(t,"BR",{}),ct=h(t),qt(G.$$.fragment,t)},m(t,l){a(t,e,l),r(e,s),r(e,d),r(e,n),r(e,k),a(t,f,l),a(t,g,l),r(g,w),r(g,O),a(t,R,l),a(t,P,l),r(P,X),r(P,$),a(t,q,l),a(t,N,l),r(N,C),r(N,m),a(t,c,l),a(t,S,l),r(S,H),r(S,U),a(t,z,l),a(t,I,l),r(I,Q),r(I,st),a(t,it,l),a(t,nt,l),a(t,ft,l),a(t,A,l),r(A,yt),r(A,ut),a(t,pt,l),a(t,J,l),r(J,Bt),r(J,at),a(t,_t,l),a(t,K,l),r(K,Tt),r(K,bt),a(t,mt,l),a(t,F,l),r(F,wt),r(F,dt),a(t,vt,l),a(t,gt,l),a(t,ct,l),jt(G,t,l),x=!0},p(t,l){(!x||l&2)&&u!==(u=t[1].position.x+"")&&D(d,u),(!x||l&2)&&v!==(v=t[1].position.y+"")&&D(k,v),(!x||l&2)&&p!==(p=t[1].yaw+"")&&D(O,p),(!x||l&2)&&M!==(M=t[1].view+"")&&D($,M),(!x||l&2)&&V!==(V=t[1].throttle+"")&&D(m,V),(!x||l&2)&&j!==(j=t[1].buttons.trigger+"")&&D(U,j),(!x||l&2)&&tt!==(tt=t[1].buttons.side_grip+"")&&D(st,tt),(!x||l&2)&&et!==(et=t[1].buttons.controller_buttons.top_left+"")&&D(ut,et),(!x||l&2)&&ot!==(ot=t[1].buttons.controller_buttons.top_right+"")&&D(at,ot),(!x||l&2)&&lt!==(lt=t[1].buttons.controller_buttons.bottom_left+"")&&D(bt,lt),(!x||l&2)&&rt!==(rt=t[1].buttons.controller_buttons.bottom_right+"")&&D(dt,rt);const Z={};l&2&&(Z.data=t[1]),G.$set(Z)},i(t){x||(Ot(G.$$.fragment,t),x=!0)},o(t){Lt(G.$$.fragment,t),x=!1},d(t){t&&o(e),t&&o(f),t&&o(g),t&&o(R),t&&o(P),t&&o(q),t&&o(N),t&&o(c),t&&o(S),t&&o(z),t&&o(I),t&&o(it),t&&o(nt),t&&o(ft),t&&o(A),t&&o(pt),t&&o(J),t&&o(_t),t&&o(K),t&&o(mt),t&&o(F),t&&o(vt),t&&o(gt),t&&o(ct),Gt(G,t)}}}function Ft(i){let e,s,u,d;const n=[Kt,Jt,At],v=[];function k(f,g){return f[1]?0:f[0]?1:2}return e=k(i),s=v[e]=n[e](i),{c(){s.c(),u=Nt()},l(f){s.l(f),u=Nt()},m(f,g){v[e].m(f,g),a(f,u,g),d=!0},p(f,[g]){let w=e;e=k(f),e===w?v[e].p(f,g):(Mt(),Lt(v[w],1,1,()=>{v[w]=null}),It(),s=v[e],s?s.p(f,g):(s=v[e]=n[e](f),s.c()),Ot(s,1),s.m(u.parentNode,u))},i(f){d||(Ot(s),d=!0)},o(f){Lt(s),d=!1},d(f){v[e].d(f),f&&o(u)}}}function Ht(i){return[...new Uint8Array(i)].map(e=>e.toString(16).padStart(2,"0")).join("")}function Qt(i,e,s){let u,d=!1;const n=g=>g!==0;function v(g){const w=Ht(g.buffer).match(/..?/g);if(w==null)return;const p=w.map(O=>parseInt(O,16));return{position:{x:(((p[1]&3)<<8)+p[0])/10.24,y:(((p[2]&15)<<6)+((p[1]&252)>>2))/10.24},yaw:p[3],view:(p[2]&240)>>4,throttle:-p[5]+255,buttons:{trigger:n((p[4]&1)>>0),side_grip:n((p[4]&2)>>1),controller_buttons:{bottom_left:n((p[4]&4)>>2),bottom_right:n((p[4]&8)>>3),top_left:n((p[4]&16)>>4),top_right:n((p[4]&32)>>5)},side_panel:{left_bottom:n((p[4]&64)>>6),left_top:n((p[4]&128)>>7),middle_bottom:n((p[6]&1)>>0),middle_top:n((p[6]&2)>>1),right_bottom:n((p[6]&4)>>2),right_top:n((p[6]&8)>>3)}}}}let k;async function f(){if(!navigator.hid)return;const g=navigator.hid,[w]=await g.requestDevice({filters:[{vendorId:1133,productId:49685}]});await w.open(),s(0,d=!0),w.addEventListener("inputreport",({data:p})=>{s(3,k=p)})}return i.$$.update=()=>{i.$$.dirty&8&&s(1,u=k?v(k):null)},[d,u,f,k]}class te extends Ut{constructor(e){super(),Dt(this,e,Qt,Ft,St,{})}}export{te as default};
